<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0">
<title>Photo Viewer</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background: black;
    overflow: hidden;
  }

  #image {
    width: 100%;
    height: auto;
    touch-action: none;
    transform-origin: center center;
    transition: transform 0.1s ease-out;
  }
</style>
</head>

<body>
<img id="image">

<script>
// Read ?img= URL parameter
const params = new URLSearchParams(window.location.search);
const rawImgUrl = params.get("img");

if (rawImgUrl) {
  const decodedUrl = decodeURIComponent(rawImgUrl);
  document.getElementById("image").src = decodedUrl;
}

// Simple pinch-zoom
let scale = 1;
let startDistance = 0;

document.addEventListener("touchmove", (e) => {
  if (e.touches.length === 2) {
    e.preventDefault();

    let dx = e.touches[0].clientX - e.touches[1].clientX;
    let dy = e.touches[0].clientY - e.touches[1].clientY;
    let distance = Math.sqrt(dx*dx + dy*dy);

    if (startDistance === 0) startDistance = distance;

    scale *= distance / startDistance;
    startDistance = distance;

    scale = Math.max(1, Math.min(scale, 10));

    document.getElementById("image").style.transform = `scale(${scale})`;
  }
});

document.addEventListener("touchend", () => {
  startDistance = 0;
});
</script>

</body>
</html>
